{% set assetHash = global.random() %}

<!DOCTYPE html>
<html lang="en">

{% include "partials/head.html" %}

<body id="{{ site.siteID }}" data-theme="light">

{% include "partials/header.html" %}

{% set pageHeaderTitle = title %}

{% block content %}

<h1>{{ pageHeaderTitle }}</h1>

<ul id="letter-list">
<li><a href="#" class="letter-link active" data-letter="all">All</a></li>
{% set lexiconByLetter = collections.lexicon | groupByInitial %}
{% for letter, terms in lexiconByLetter %}
<li><a href="#letter-{{ letter }}" class="letter-link" data-letter="{{ letter }}">{{ letter }}</a></li>
{% endfor %}
<li><a href="/lexicon-grid" class="letter-view" title="Grid view">
<svg class="img-toolbar" xmlns="http://www.w3.org/2000/svg" width="48" viewBox="0 0 48 48"><g fill="none"><path class="img-toolbar-stroke" stroke="#afb6af" d="M43.167 1.5c.92 0 1.753.373 2.357.976.603.604.976 1.437.976 2.357v38.334c0 .92-.373 1.754-.976 2.357a3.32 3.32 0 0 1-2.357.976H4.833c-.92 0-1.753-.373-2.357-.976a3.32 3.32 0 0 1-.976-2.357V4.833c0-.92.373-1.753.976-2.357A3.32 3.32 0 0 1 4.833 1.5Z"/><path class="img-toolbar-fill" fill="#afb6af" fill-rule="evenodd" d="M10 8h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1m12 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1m12 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1M10 20h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1m12 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1m12 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1M10 32h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1m12 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1m12 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1"/></g>
</svg>
</a></li>
<li><a href="/lexicon-list" class="letter-view" title="List view">
<svg class="img-toolbar" xmlns="http://www.w3.org/2000/svg" width="48" viewBox="0 0 48 48"><g fill="none"><path class="img-toolbar-stroke" d="M43.167 1.5c.92 0 1.753.373 2.357.976.603.604.976 1.437.976 2.357v38.334c0 .92-.373 1.754-.976 2.357a3.32 3.32 0 0 1-2.357.976H4.833c-.92 0-1.753-.373-2.357-.976a3.32 3.32 0 0 1-.976-2.357V4.833c0-.92.373-1.753.976-2.357A3.32 3.32 0 0 1 4.833 1.5Z" stroke="#afb6af"/><path class="img-toolbar-stroke" stroke="#afb6af" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M37.417 24H10.583m26.834-11.5H10.583m26.834 23H10.583"/>
</g></svg>
</a></li>
</ul>

<div class="layout" data-layout="softy">

<div>

{% set featuredTerms = collections.lexicon | filterByFeatured %}
{% if featuredTerms.length > 0 %}
{% set latestFeatured = featuredTerms | reverse | first %}

<div id="panel-highlight" data-theme="inverted">

<div class="alt-bordered">
<h2>Featured</h2>
<a href="/lexicon-featured/">See all</a>
</div><!-- alt-bordered -->

<h3 data-size="2xl"><a href="{{ latestFeatured.url }}">{{ latestFeatured.data.title }}</a></h3>

<blockquote data-variant="bordered-l">
<p>{{ latestFeatured.data.summary }}</p>
</blockquote>

</div><!-- panel-highlight -->
{% endif %}

{% set lexiconByLetter = collections.lexicon | groupByInitial %}
{% for letter, terms in lexiconByLetter %}

<section class="letter-section" id="letter-{{ letter }}" data-letter="{{ letter }}">

<div>
<h2>{{ letter }}</h2>
</div><!-- one -->

{% for term in terms %}
<article class="item-lexicon">
<h3><a href="{{ term.url }}">{{ term.data.title }}</a></h3>

<blockquote>
<p>{{ term.data.summary }}</p>
</blockquote>

</article>
{% endfor %}
</section>
{% endfor %}
</div><!-- one -->

<aside>
<h3>What&#8217;s this?</h3>
{{ aside | safe }}

<hr data-function="spacer">

<h2>Popular terms</h2>
<ul class="alt-" data-variant="bordered-l">
{% for term in collections.lexicon %}
{% if term.data.popular %}
<li><a href="{{ term.url }}">{{ term.data.title }}</a></li>
{% endif %}
{% endfor %}
</ul>
</aside><!-- two -->

</div><!-- layout -->

<script>
document.addEventListener('DOMContentLoaded', function() {
const letterLinks = document.querySelectorAll('.letter-link');
const letterSections = document.querySelectorAll('.letter-section');

// Function to show all letters
function showAllLetters() {
// Show all sections
letterSections.forEach(section => {
section.classList.remove('filtered');
section.classList.remove('active');
});

// Remove active class from all links and set "All" as active
letterLinks.forEach(link => {
link.classList.remove('active');
});
document.querySelector('.letter-link[data-letter="all"]').classList.add('active');

// Clear URL hash
history.replaceState(null, null, window.location.pathname);
}

// Function to show a specific letter section
function showLetter(letter) {
// Hide all sections and add filtered class
letterSections.forEach(section => {
section.classList.add('filtered');
section.classList.remove('active');
});

// Remove active class from all links
letterLinks.forEach(link => {
link.classList.remove('active');
});

// Show the selected section and activate the link
const targetSection = document.getElementById(`letter-${letter}`);
const targetLink = document.querySelector(`.letter-link[data-letter="${letter}"]`);

if (targetSection && targetLink) {
targetSection.classList.remove('filtered'); // Remove filtered class to show it
targetSection.classList.add('active');
targetLink.classList.add('active');
}

// Update URL hash without scrolling
history.replaceState(null, null, `#letter-${letter}`);
}

// Check for hash on page load
const initialHash = window.location.hash;
if (initialHash && initialHash.startsWith('#letter-')) {
const initialLetter = initialHash.replace('#letter-', '');
showLetter(initialLetter);
} else {
// Show all letters by default
showAllLetters();
}

// Add click handlers to letter links
letterLinks.forEach(link => {
link.addEventListener('click', function(e) {
e.preventDefault();
const letter = this.getAttribute('data-letter');

if (letter === 'all') {
showAllLetters();
} else {
showLetter(letter);
}
});
});
});
</script>

{% endblock %}

{% include "partials/footer.html" %}

</body>

</html>