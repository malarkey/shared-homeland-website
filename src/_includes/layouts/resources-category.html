---
pagination:
  data: collections.resourcesCategory
  size: 1
  alias: category
permalink: "/resources/category/{{ category | slug }}/"
layout: "layouts/base.html"
---

{% set categoryResources = collections.resources | filterByCategory(category) %}

{% block content %}
<div class="resources-layout">
  <aside class="sidebar">
    <h3>Categories</h3>
    <nav>
      {% for cat in collections.resourcesCategory %}
        <a href="/resources/category/{{ cat | slug }}/" {% if cat == category %}class="current"{% endif %}>{{ cat }}</a>
      {% endfor %}
    </nav>

    <h3>Search</h3>
    <form action="/resources/search/" method="GET">
      <input type="search" name="q" placeholder="Search resources...">
      <button type="submit">Search</button>
    </form>
  </aside>

  <main class="resources-list">
    <h1>Category: {{ category }}</h1>

    {% for resource in categoryResources %}
      <article class="resource">
        <h2>
          {% if resource.data.url %}
            <a href="{{ resource.data.url }}">{{ resource.data.title }}</a>
          {% else %}
            <a href="{{ resource.data.file }}">{{ resource.data.title }}</a>
          {% endif %}
        </h2>
        <p class="meta">By {{ resource.data.author }} â€¢ {{ resource.data.date | dateFilter }}</p>
        <p class="summary">{{ resource.data.summary }}</p>
        <div class="taxonomy">
          {% for cat in resource.data.categories %}
            <a href="/resources/category/{{ cat | slug }}/" class="category">{{ cat }}</a>
          {% endfor %}
          {% for tag in resource.data.tags %}
            <a href="/resources/tag/{{ tag | slug }}/" class="tag">{{ tag }}</a>
          {% endfor %}
        </div>
      </article>
    {% else %}
      <p>No resources found in this category.</p>
    {% endfor %}
  </main>
</div>
{% endblock %}